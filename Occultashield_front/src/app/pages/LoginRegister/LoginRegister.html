<div class="login-layout">
  <main class="form-container">
    <div class="form-wrapper">

      <header class="header">
        <div class="logo-wrapper">
          <img src="logo_1_escudo_sin.png" width="50" height="60" alt="Logo" priority>
        </div>
        <h1 class="brand-name">OccultaShield</h1>
      </header>

      <h2 class="headline">Secure Access Portal</h2>
      <p class="subheadline">Enter your credentials to access your secure dashboard.</p>

      <form (submit)="onSubmit($event)" class="login-form">

        <div class="input-group">
          <label for="email">Email address</label>

          <input
            id="email"
            type="email"
            [field]="loginForm.email"
            placeholder="name@company.com"
            autocomplete="email"
          >

          @if (loginForm.email().touched() && loginForm.email().invalid()) {
            <ul class="error-list">
              @for (error of loginForm.email().errors(); track error) {
                <li class="error-text">{{ error.message }}</li>
              }
            </ul>
          }
        </div>

        <div class="input-group">
          <label for="password">Password</label>
          <div class="password-wrapper">
            @if (showPassword()) {
              <input
                id="password"
                type="text"
                [field]="loginForm.password"
                placeholder="••••••••"
                autocomplete="current-password"
              >
            } @else {
              <input
                id="password"
                type="password"
                [field]="loginForm.password"
                placeholder="••••••••"
                autocomplete="current-password"
              >
            }
            <button
              type="button"
              class="toggle-visibility"
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="showPassword() ? 'Hide password' : 'Show password'"
            >
              @if (!showPassword()) {
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
              } @else {
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M1 1l22 22"></path></svg>
              }
            </button>
          </div>

          @if (loginForm.password().touched() && loginForm.password().invalid()) {
            <ul class="error-list">
              @for (error of loginForm.password().errors(); track error) {
                <li class="error-text">{{ error.message }}</li>
              }
            </ul>
          }
        </div>

        <div class="actions-row">
          <label class="custom-checkbox">
            <input type="checkbox" [field]="loginForm.rememberMe">
            <span class="checkmark"></span>
            <span class="label-text">Remember me</span>
          </label>
          <a routerLink="/forgot-password" class="link-forgot">Forgot password?</a>
        </div>

        <div class="buttons-grid">
          <button type="button" class="btn btn-secondary">Register</button>

          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="loginForm().invalid() || isLoading()"
          >
            @if (isLoading()) {
              <span class="spinner"></span> Processing...
            } @else {
              Sign in
            }
          </button>
        </div>

      </form>
    </div>
  </main>

  <aside class="visual-panel">
    <div class="visual-content">
      <div class="text-content">
        <h2>Your Digital Guardian</h2>
        <p>Advanced video privacy and GDPR compliance, powered by state-of-the-art technology. OccultaShield stands watch, so you don't have to.</p>
      </div>
    </div>
  </aside>
</div>
