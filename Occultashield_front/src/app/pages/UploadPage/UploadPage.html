<div class="page-container">

  <header class="main-header">
    <div class="brand-container">
      <img
        src="halcon_logo_sinTexto.png"
        alt="OccultaShield Logo"
        class="brand-logo"
      >
      <div class="brand-text">
        <h1 class="brand-name">OccultaShield</h1>
        <p class="brand-subtitle">Securely upload and process your video files.</p>
      </div>
    </div>

    <div class="user-actions">
      <span class="user-email">{{ authService.user()?.email }}</span>
      <button class="btn-logout" (click)="logout()">
        <span class="material-icons-outlined">logout</span>
        Logout
      </button>
    </div>
  </header>

  <main class="main-content">
    <div class="upload-card">

      @if (uploadStatus() === 'idle') {

        <div
          class="drop-area"
          FileDrop
          (fileDropped)="handleFile($event)"
          (click)="triggerFileSelect()"
        >
          <div class="icon-floating">
            <span class="material-icons-outlined">cloud_upload</span>
          </div>

          <h2 class="title">Drop Your Video Here</h2>
          <p class="subtitle">to start the secure upload process</p>

          <div class="divider">
            <span class="line"></span>
            <span class="text">OR</span>
            <span class="line"></span>
          </div>

          <button type="button" class="btn-primary">
            Select File from Device
          </button>

          <input
            #fileInputRef
            type="file"
            accept="video/*"
            class="hidden"
            (change)="handleFile($event)"
          >

          <p class="legal-text">Max file size: 2GB. Supported formats: MP4, MOV, AVI</p>
        </div>

      }

      @else {

        <div class="progress-area">
          <div class="file-info">
            <span class="filename">{{ fileName() }}</span>
            <span class="percent">{{ uploadProgress() }}%</span>
          </div>

          <div class="progress-track">
            <div
              class="progress-bar"
              [style.width.%]="uploadProgress()"
            ></div>
          </div>

          @if (uploadStatus() === 'complete') {
            <div class="success-badge">
              <span class="material-icons-outlined">check_circle</span>
              <span>Upload complete!</span>
            </div>

            <button type="button" class="btn-continue" (click)="continueToProcessing()">
              <span>Continue to Processing</span>
              <span class="material-icons-outlined">arrow_forward</span>
            </button>
          }
        </div>

      }

    </div>
  </main>
</div>
